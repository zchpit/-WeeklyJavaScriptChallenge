<html>
<head>
</head>
<body>
  <div id="clientInfo">
    <label id=lbClientInfo> Client info </label>
    <br/>
    <label id=lbClientFirstName> First Name </label>
    <input type="input" text="" id="tbClientFirstName" />
    <label id=lbClientLastName> Surname </label>
    <input type="input" text="" id="tbClientLastName" />
  </div>
  <br/>
  <div id=companyInfo>
    <label id=lbClientCity> City </label>
    <input type="input" text="" id="tbClientCity" />
    <label id=lbClientStreet> Street </label>
    <input type="input" text="" id="tbClientStreet" />
    <label id=lbClientPostalCode> Postal code </label>
    <input type="input" text="" id="tbClientPostalCode" />
    <br/>
    <label id=lbCompanyInfo> Company info </label>   <br/>
    <label id=lbCompanyName> Company Name </label>
    <input type="input" text="" id="tbCompanyName" />
    <label id=lbCompanyTaxNumber> Tax number </label>
    <input type="input" text="" id="tbCompanyTaxNumber" />
    <br/>
    <label id=lbCompanyCity> City </label>
    <input type="input" text="" id="tbCompanyCity" />
    <label id=lbCompanyStreet> Street </label>
    <input type="input" text="" id="tbCompanySurname" />
    <label id=lbCompanyPostalCode> Postal code </label>
    <input type="input" text="" id="tbCompanyPostalCode" />
  </div>
  <br/>
  <div id="invoiceInfo">
    <label id=lbAmount> Amount </label>
    <input type="input" text="" id="tbAmount" />
    <br/>
    <label id=lbInvoiceStatus> Invoice status </label>
    <br/>
    <input type="radio" name="invoiceStatus" value="issued" checked> issued <br/>
    <input type="radio" name="invoiceStatus" value="delivered"> delivered <br/>
    <input type="radio" name="invoiceStatus" value="paid"> paid <br/>
    <input type="radio" name="invoiceStatus" value="late"> late
  </div>
  <br/>
  <div id="updateInfo">
    <label id=lbUpdateInfo> Last time updated </label>
    <label id=lbUpdateDate> Amount </label>
  </div>
  </body>
</html>

<script>
window.onload = function() {
  loadObjectAfterPageLoad();
};
/*
document.getElementsByTagName("radio").addEventListener("change", function(){
  objectChanged();
});*/
var input = document.getElementsByTagName("input")[0];
input.addEventListener("input", function(){
  objectChanged();
});
function loadObjectAfterPageLoad()
{
  var client = readFromLocalStorage("client");

  if(client != null)
    setObjectToForm(client);
};
function objectChanged()
{
  var client = getObjectFromForm();

  if (!validateInput(client))
      showError(client)
  else
  {
    saveToLocalStorage("client",client);
  }
};
function saveToLocalStorage(name,value) {
  localStorage.setItem(name, JSON.stringify(value));
};
function readFromLocalStorage(name) {
  var retrievedObject = localStorage.getItem(name);
  var client = JSON.parse(retrievedObject);
  return client;
};
function getObjectFromForm()
{
  var clientFirstName = document.getElementById("tbClientFirstName").value;
  var clientLastName = document.getElementById("tbClientLastName").value;

  var clientCity = document.getElementById("tbClientCity").value;
  var clientStreet = document.getElementById("tbClientStreet").value;
  var clientPostalCode = document.getElementById("tbClientPostalCode").value;

  var clientAdress = {city:clientCity, street:clientStreet, postalCode:clientPostalCode};
  var client = {firstName:clientFirstName, lastName:clientLastName, adress:clientAdress };

  
};
function setObjectToForm(client)
{
  document.getElementById("tbClientFirstName").value = client.firstName != undefined ? client.firstName : '';
  document.getElementById("tbClientLastName").value= client.clientLastName != undefined ? client.clientLastName : '';

  if(client.adress != undefined){
    document.getElementById("tbClientCity").value = client.adress.city != undefined ? client.adress.city : '';
    document.getElementById("tbClientStreet").value = client.adress.street != undefined ? client.adress.street : '';
    document.getElementById("tbClientPostalCode").value = client.adress.postalCode != undefined ? client.adress.postalCode : '';
  }
  else {
    document.getElementById("tbClientCity").value = '';
    document.getElementById("tbClientStreet").value = '';
    document.getElementById("tbClientPostalCode").value = '';
  }


  return client;
};
</script>
